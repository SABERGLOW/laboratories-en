
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="Dudás Ákos">
      
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Exercises solved together - BMEVIAUAC09 Software development laboratory 1</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../extra-material-theme.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="red" data-md-color-accent="red">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#exercises-solved-together" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="BMEVIAUAC09 Software development laboratory 1" class="md-header__button md-logo" aria-label="BMEVIAUAC09 Software development laboratory 1" data-md-component="logo">
      
  <img src="../../images/logo-bme-aut.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BMEVIAUAC09 Software development laboratory 1
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Exercises solved together
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="" data-md-color-primary="red" data-md-color-accent="red"  aria-label="Switch to dark theme"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark theme" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent=""  aria-label="Switch to light theme"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light theme" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/bmeviauac01/laboratories-en/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    bmeviauac01/laboratories-en
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        Software development laboratory 1
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Lab-ReportingServices/" class="md-tabs__link">
        Reporting Services
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Query optimization
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Lab-MSSQL/" class="md-tabs__link">
        MSSQL
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Lab-MongoDB/" class="md-tabs__link">
        MongoDB
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Lab-EFREST/" class="md-tabs__link">
        Entity Framework & REST
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="BMEVIAUAC09 Software development laboratory 1" class="md-nav__button md-logo" aria-label="BMEVIAUAC09 Software development laboratory 1" data-md-component="logo">
      
  <img src="../../images/logo-bme-aut.png" alt="logo">

    </a>
    BMEVIAUAC09 Software development laboratory 1
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/bmeviauac01/laboratories-en/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    bmeviauac01/laboratories-en
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Software development laboratory 1
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Software development laboratory 1" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Software development laboratory 1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Course overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../GitHub/" class="md-nav__link">
        Submitting your work (GitHub)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../GitHub-Actions/" class="md-nav__link">
        Using GitHub Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../VisualStudio/" class="md-nav__link">
        Install Visual Studio & .NET Core SDK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../GitHub-credentials/" class="md-nav__link">
        In university laboratories: GitHub access
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Reporting Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reporting Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Reporting Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/" class="md-nav__link">
        Reporting Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/Exercise-1/" class="md-nav__link">
        Exercise 1: Table report
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/Exercise-2/" class="md-nav__link">
        Exercise 2: Visualization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/Exercise-3/" class="md-nav__link">
        Exercise 3: Sales personnel report
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-ReportingServices/Exercise-4/" class="md-nav__link">
        Exercise 4: Optional exercise
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Query optimization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Query optimization" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Query optimization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Query optimization
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Exercises solved together
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Exercises solved together
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#exercise-1-2p" class="md-nav__link">
    Exercise 1 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-2-2p" class="md-nav__link">
    Exercise 2 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-3-2p" class="md-nav__link">
    Exercise 3 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-4-2p" class="md-nav__link">
    Exercise 4 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-5-2p" class="md-nav__link">
    Exercise 5 (2p)
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-2/" class="md-nav__link">
        Individual exercises
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Exercise-3/" class="md-nav__link">
        Optional exercises
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          MSSQL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MSSQL" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          MSSQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/" class="md-nav__link">
        MSSQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/Exercise-1/" class="md-nav__link">
        Exercise 1: Category view and data insertion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/Exercise-2/" class="md-nav__link">
        Exercise 2: Validating invoices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/Exercise-3/" class="md-nav__link">
        Exercise 3: Denormalize invoices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MSSQL/Exercise-4/" class="md-nav__link">
        Exercise 4: Optional exercise
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          MongoDB
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MongoDB" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          MongoDB
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/" class="md-nav__link">
        MongoDB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Exercise-1/" class="md-nav__link">
        Exercise 1: Listing and modifying products
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Exercise-2/" class="md-nav__link">
        Exercise 2: Listing categories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Exercise-3/" class="md-nav__link">
        Exercise 3: Querying and modifying orders
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Exercise-4/" class="md-nav__link">
        Exercise 4: Listing customers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-MongoDB/Exercise-5/" class="md-nav__link">
        Exercise 5: Optional exercise
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Entity Framework & REST
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Entity Framework & REST" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Entity Framework & REST
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-EFREST/" class="md-nav__link">
        Entity Framework and REST
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-EFREST/Exercise-1/" class="md-nav__link">
        Exercise 1: Managing statuses
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-EFREST/Exercise-2/" class="md-nav__link">
        Exercise 2: Task operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-EFREST/Exercise-3/" class="md-nav__link">
        Exercise 3: Task operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-EFREST/Exercise-4/" class="md-nav__link">
        Exercise 4: Optional exercise
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#exercise-1-2p" class="md-nav__link">
    Exercise 1 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-2-2p" class="md-nav__link">
    Exercise 2 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-3-2p" class="md-nav__link">
    Exercise 3 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-4-2p" class="md-nav__link">
    Exercise 4 (2p)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-5-2p" class="md-nav__link">
    Exercise 5 (2p)
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/bmeviauac01/laboratories-en/edit/master/docs/Lab-QueryOptimization/Exercise-1.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="exercises-solved-together">Exercises solved together<a class="headerlink" href="#exercises-solved-together" title="Permanent link">&para;</a></h1>
<div class="admonition example">
<p class="admonition-title">SUBMISSION</p>
<p>The submission shall be a documentation written in the <code>README.md</code> file:</p>
<ul>
<li>document the SQL commands (if the exercise tells you to),</li>
<li>a screenshot of the query plan (just the plan and <em>not</em> the entire desktop!),</li>
<li>and an explanation: <em>what</em> do you see on the query plan and <em>why</em> the system chose this option.</li>
</ul>
<p>The documentation should correctly display with the images in the web interface of GitHub! You need to verify this during the submission: open the repository in the browser and switch to your branch; GitHub will automatically render the <code>README.md</code> file with the images.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Submit your own work</p>
<p>Even though the solutions are provided below, you are required to execute the queries, get the execution plan, think about it, and document it with your own words. Copying the explanations from below is not acceptable!</p>
</div>
<p>If the query plan or the explanation of subsequent exercises is the same, or at least very similar, it is enough to document everything once (one screenshot and one reasoning); and list which (sub)exercises it is the solution for.</p>
<h2 id="exercise-1-2p">Exercise 1 (2p)<a class="headerlink" href="#exercise-1-2p" title="Permanent link">&para;</a></h2>
<p>Drop the <code>CustomerSite</code> =&gt; <code>Customer</code> foreign key and the <code>Customer</code> table primary key constraint. Find these in the <em>Object Explorer</em> and delete them (the <em>PK...</em> is the primary key while the <em>FK...</em> is the foreign key - the ones you need to delete are in two different tables!):</p>
<p><img alt="Delete constraint" src="../../images/queryopt/queryopt-delete-key.png" /></p>
<p>Execute the following queries on the <code>Customer</code> table and examine the execution plans (always fetch the entire records using <code>select *</code>):</p>
<ul>
<li>a) query the whole table</li>
<li>b) get one record based on primary key</li>
<li>c) querying records where the primary key is not a specified constant (use the <code>&lt;&gt;</code> comparison operation for not equals)</li>
<li>d) querying records where the primary key is greater than a specified constant</li>
<li>e) querying records where the primary key is greater than a specified constant, ordering by ID descending  </li>
</ul>
<p>Document the SQL commands you used and explain the actual query execution plan!</p>
<details class="success"><summary>Solution</summary><p>The SQL <strong>queries</strong>:</p>
<ul>
<li>a) <code>select * from customer</code></li>
<li>b) <code>select * from customer where id = 1</code></li>
<li>c) <code>select * from customer where id &lt;&gt; 1</code></li>
<li>d) <code>select * from customer where id &gt; 1</code></li>
<li>e) <code>select * from customer where id &gt; 1 order by id desc</code></li>
</ul>
<p><strong>a)-d)</strong></p>
<p>The <strong>execution plan</strong> is indentical for all, it uses a <em>table scan</em> each time:</p>
<p><img alt="" src="../../images/queryopt/f1-1.png" /></p>
<p><strong>Explanation</strong>: the optimizer cannot use any index, as there is none. Thus there is no other choice but to use a <em>table scan</em>.</p>
<p><strong>e)</strong></p>
<p>This one is a little different due to the order by there is a sort stage too.</p>
<p><img alt="" src="../../images/queryopt/f1-2.png" /></p>
<p><strong>Explanation</strong>: The <em>table scan</em> is the same, and after that, there is still a need for sorting - without any index, it is a separate stage.</p>
</details>
<h2 id="exercise-2-2p">Exercise 2 (2p)<a class="headerlink" href="#exercise-2-2p" title="Permanent link">&para;</a></h2>
<p>Re-create the primary key of the <code>Customer</code> table:</p>
<ul>
<li>Right-click the table &gt; Design &gt; then right-click the ID column "Set Primary Key " then Save,</li>
<li>or execute <code>ALTER TABLE [dbo].[Customer] ADD PRIMARY KEY CLUSTERED ([ID] ASC)</code></li>
</ul>
<p>Re-run the same queries as in the previous exercise. What do you experience?</p>
<details class="success"><summary>Solution</summary><p>The commands are the same as before.</p>
<p><strong>a)</strong></p>
<p><img alt="" src="../../images/queryopt/f2-1.png" /></p>
<p>The Clustered Index Scan iterates the table. We have a Clustered Index automatically created for the primary key, which has the records sorted by ID. By iterating through this index, all records are visited. This is almost identical to a Table Scan, though, not efficient. However, this is what we asked for here.</p>
<p><strong>b)</strong></p>
<p><img alt="" src="../../images/queryopt/f2-2.png" /></p>
<p>A Clustered Index Seek is enough. Since the filter criteria is for the ID, for which there is an index available, the matching record can be found quickly. This is an efficient plan; the Clustered Index is used for the exact purpose we created it for.</p>
<p><strong>c)</strong></p>
<p>Similar to the previous one, a Clustered Index Seek between two intervals (<code>&lt; constant</code>, <code>&gt; constant</code>). Since the filter criteria still references the ID field with a Clustered Index, the query will use this index. This is an efficient query.</p>
<p><strong>d)</strong></p>
<p>Very similar to the previous one with a range filter.</p>
<p><strong>e)</strong></p>
<p><img alt="" src="../../images/queryopt/f2-3.png" /></p>
<p>Clustered Index Seek with a backward seek order. The <em>Properties</em> window shows the Seek Order-t: find the last matching record, and walk the index backward, which will yield a sorted result set.</p>
</details>
<h2 id="exercise-3-2p">Exercise 3 (2p)<a class="headerlink" href="#exercise-3-2p" title="Permanent link">&para;</a></h2>
<p>Execute the following queries on the <code>Product</code> table.</p>
<ul>
<li>f) query the whole table</li>
<li>g) search for specific records where <code>Price</code> equals a value</li>
<li>h) query records where <code>Price</code> is not a specified constant (&lt;&gt;)</li>
<li>i) query records where <code>Price</code> is greater than a value</li>
<li>j) query records where <code>Price</code> is greater than a value, ordered by <code>Price</code> descending</li>
</ul>
<p>Document the SQL commands you used and explain the actual query execution plan!</p>
<details class="success"><summary>Solution</summary><p>The SQL <strong>commands</strong>:</p>
<ul>
<li>f) <code>select * from product</code></li>
<li>g) <code>select * from product where price = 800</code></li>
<li>h) <code>select * from product where price &lt;&gt; 800</code></li>
<li>i) <code>select * from product where price &gt; 800</code></li>
<li>j) <code>select * from product where price &gt; 800 order by price desc</code></li>
</ul>
<p><strong>f)-i)</strong></p>
<p><img alt="" src="../../images/queryopt/f3-1.png" /></p>
<p>A Clustered Index Scan iterates through the contents of the index. This is still equal to reading the entire table since there is no index to match the filter criteria. Although a Clustered Index is used, it does not serve any purpose in filtering; all records are visited, and the filter is evaluated for each. These are not efficient queries, as the existing index is of no use.</p>
<p><strong>j)</strong></p>
<p><img alt="" src="../../images/queryopt/f3-2.png" /></p>
<p>Still a Clustered Index Scan, but what is interesting is that cost of the sorting stage is quite large. Even after executing a costly Index Scan, we still have further sorting to do. A good index would help, but there is no index for the sorted column.</p>
</details>
<h2 id="exercise-4-2p">Exercise 4 (2p)<a class="headerlink" href="#exercise-4-2p" title="Permanent link">&para;</a></h2>
<p>Add a new non-clustered index on column <code>Price</code>. How do the execution plans change?</p>
<p>To add the index use <em>Object Explorer</em>, find the table, expand it, and right-click <em>Indexes</em> -&gt; <em>New index</em> &gt; <em>Non-Clustered Index...</em></p>
<p><img alt="Create index" src="../../images/queryopt/queryopt-add-index.png" /></p>
<p>Indices should have meaningful names, e.g., <code>IX_Tablename_Fieldname</code>. Add <em>Price</em> column to the <em>Index key columns</em> list.</p>
<p><img alt="Index properties" src="../../images/queryopt/queryopt-index-properties.png" /></p>
<p>Repeat the queries from the previous exercise and explain the plans!</p>
<details class="success"><summary>Solution</summary><p>The SQL commands are the same as in the previous exercise.</p>
<p><strong>f)</strong></p>
<p>Despite the new index, it is still an Index Scan - since we asked for the contents of the entire table.</p>
<p><strong>g)-i)</strong></p>
<p>Clustered Index Scan iterating through the entire table, just as if there was no index available for the filtered column.</p>
<p>Why does it not use the new index? The reason is the projection; that is, we query the entire record. The NonClustered Index could yield a set of record identifiers, after which the records themselves would still need to be queried. The optimizer decides that it is not worth doing so; an Index Scan is more efficient.</p>
<p><strong>j)</strong></p>
<p><img alt="" src="../../images/queryopt/f4-1.png" /></p>
<p>The NonClustered Index Seek yields keys, which are looked up in the Clustered Index, just like joining the two indices.</p>
<p>We would have expected something similar in the previous queries too. The Clustered Index is needed as entire records are fetched as the NonClustered Index only provides references. However, these references are in the correct order (the NonClustered Index ensures it); so after the lookup in the Clustered Index, there is no further need to do the sorting. If only the Clustered Index were used (Clustered Index Scan), the sorting would have to be performed in a separate stage. This is an acceptable query, as the NonClustered Index helps in avoiding a costly sorting step.</p>
</details>
<h2 id="exercise-5-2p">Exercise 5 (2p)<a class="headerlink" href="#exercise-5-2p" title="Permanent link">&para;</a></h2>
<p>Generate new records into the <em>Product</em> table with the script below. How do the execution plans change?</p>
<p>When repeating the query for sub-exercise i), choose a constant value that will yield few resulting records, then choose a value that returns almost all records. Explain the differences!</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="n">TOP</span> <span class="p">(</span><span class="mi">1000000</span><span class="p">)</span> <span class="n">n</span> <span class="o">=</span> <span class="k">ABS</span><span class="p">(</span><span class="n">CHECKSUM</span><span class="p">(</span><span class="n">NEWID</span><span class="p">()))</span>
<span class="k">INTO</span> <span class="n">dbo</span><span class="p">.</span><span class="n">Numbers</span>
<span class="k">FROM</span> <span class="n">sys</span><span class="p">.</span><span class="n">all_objects</span> <span class="k">AS</span> <span class="n">s1</span> <span class="k">CROSS</span> <span class="k">JOIN</span> <span class="n">sys</span><span class="p">.</span><span class="n">all_objects</span> <span class="k">AS</span> <span class="n">s2</span>
<span class="k">OPTION</span> <span class="p">(</span><span class="n">MAXDOP</span> <span class="mi">1</span><span class="p">);</span>

<span class="k">CREATE</span> <span class="n">CLUSTERED</span> <span class="k">INDEX</span> <span class="n">n</span> <span class="k">ON</span> <span class="n">dbo</span><span class="p">.</span><span class="n">Numbers</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="p">;</span>


<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Product</span><span class="p">(</span><span class="n">Name</span><span class="p">,</span> <span class="n">Price</span><span class="p">,</span> <span class="n">Stock</span><span class="p">,</span> <span class="n">VATID</span><span class="p">,</span> <span class="n">CategoryID</span><span class="p">)</span>
<span class="k">SELECT</span> <span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">%</span><span class="mi">50000</span><span class="p">,</span> <span class="n">n</span><span class="o">%</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">13</span>
<span class="k">FROM</span> <span class="n">Numbers</span>
</code></pre></div>
<details class="success"><summary>Solution</summary><p>The SQL commands are the same.</p>
<p><strong>f)</strong></p>
<p>Same as before.</p>
<p><strong>g)</strong></p>
<p><img alt="" src="../../images/queryopt/f5-1.png" /></p>
<p>References from the NonClustered Index Seek are looked up in the Clustered Index, just like joining the two indices.</p>
<p>Let us compare this plan to the one from before having a smaller table. Why is the Clustered Index Scan not used now? In the case of larger tables, the <em>selectivity</em> (i.e., how many records match the filtering) is more important, hence the use of the NonClustered Index. The Clustered Index Scan would be too costly in a large table. The NonClustered Index can reduce the number of records, hence its role here. Based on the statistics of the <code>Price</code> column, it can be derived that the <code>=</code> operator will match few records. Important! Just because it is an <code>=</code> comparison, it does not directly follow that there are few matches; imagine the column having the same value in all records. Hence the need for the statistics!</p>
<p>This is an acceptable query. Since the filtering reduces the number of records, it is worth using the index.</p>
<p><strong>h)</strong></p>
<p><img alt="" src="../../images/queryopt/f5-2.png" /></p>
<p>Clustered Index Scan as before.</p>
<p>Why the difference compared to the previous case? If the <code>=</code> operator yields few matches, then <code>&lt;&gt;</code> will yield many. This is derived from the statistics too. So no use in doing the same as in the previous case; a Clustered Index Scan is probably more efficient.</p>
<p><strong>i)</strong></p>
<p>The plan depends on the constant. If it yields few matches, similar to g); otherwise the same as in h).</p>
<p><strong>j)</strong></p>
<p>Just like for g). Does the <code>order by desc</code> matter here? The optimizer tries to avoid sorting, and this is the only way to do so. This is an acceptable plan; by using the NonClustered Index there is no separate sorting stage.</p>
</details>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Query optimization" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Query optimization
            </div>
          </div>
        </a>
      
      
        
        <a href="../Exercise-2/" class="md-footer__link md-footer__link--next" aria-label="Next: Individual exercises" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Individual exercises
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; BME VIK AUT
          </div>
        
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.top", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>